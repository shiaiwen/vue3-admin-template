import{G as x,d as B,r as g,B as K,e as r,o as _,f as S,g as e,w as t,h as i,k as V,z as $,i as u,t as h,F as C,l as z,m as I,H as k,p as O,j as P,_ as J}from"./index-iq3_YIvd.js";const Q=(o,p)=>x.get(`/admin/product/list/${o}/${p}`),W=o=>x.get(`/admin/product/list/${o}`),X=o=>x.get(`/admin/product/cancelSale/${o}`),Y=o=>x.get(`/admin/product/getSkuInfo/${o}`),Z=o=>x.delete(`/admin/product/deleteSku/${o}`),ee=o=>(O("data-v-6c5b8670"),o=o(),P(),o),te=["src"],ae=ee(()=>V("h4",null,"商品详情",-1)),le=["src"],oe=B({name:"Sku"}),ne=B({...oe,setup(o){let p=g(1),f=g(10),N=g(0),b=g([]),w=g(!1),d=g({});const y=async(c=1)=>{p.value=c;const l=await Q(p.value,f.value);if(console.log(l,"列表请求的结果"),l.code===200){const n=l.data;N.value=n.total,b.value=n.records}},L=async({id:c,isSale:l})=>{let n=null;l===1?n=await X(c):n=await W(c),n.code===200?(k({type:"success",message:`${l===1?"下架成功":"上架成功"}`}),y()):k({type:"error",message:`${l===1?"下架失败":"上架失败"}`})},U=()=>{k({type:"info",message:"正在研发"})},A=async({id:c})=>{w.value=!0;const l=await Y(c);console.log(l,"获取得的商鑫享清福"),d.value=l.data},E=async({id:c})=>{(await Z(c)).code===200?(k({type:"success",message:"删除成功"}),y(b.value.length>1?p.value:p.value-1)):k({type:"error",message:"删除失败"})};return K(()=>{y()}),(c,l)=>{const n=r("el-table-column"),v=r("el-button"),F=r("el-popconfirm"),G=r("el-table"),M=r("el-pagination"),j=r("el-card"),s=r("el-col"),m=r("el-row"),D=r("el-tag"),R=r("el-carousel-item"),T=r("el-carousel"),H=r("el-drawer");return _(),S("div",null,[e(j,null,{default:t(()=>[e(G,{border:"",style:{margin:"10px 0"},data:i(b)},{default:t(()=>[e(n,{label:"序号",type:"index",align:"center",width:"80"}),e(n,{label:"名称","show-overflow-tooltip":"",prop:"skuName",width:"300px"}),e(n,{label:"描述",prop:"skuDesc","show-overflow-tooltip":"",width:"300px"}),e(n,{label:"图片",width:"150px"},{default:t(a=>[V("img",{src:a.row.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,te)]),_:1}),e(n,{label:"重量",width:"150px",prop:"weight"}),e(n,{label:"价格",width:"150px",prop:"price"}),e(n,{label:"操作",width:"300px",fixed:"right"},{default:t(a=>[e(v,{type:"primary",size:"small",icon:a.row.isSale===1?"Bottom":"Top",title:a.row.isSale===1?"下架":"上架",onClick:q=>L(a.row)},null,8,["icon","title","onClick"]),e(v,{type:"primary",size:"small",icon:"Edit",onClick:U}),e(v,{type:"primary",size:"small",icon:"InfoFilled",onClick:q=>A(a.row)},null,8,["onClick"]),e(F,{title:"确定删除吗?",width:"300px",onConfirm:q=>E(a.row)},{reference:t(()=>[e(v,{type:"danger",size:"small",icon:"Delete",title:"删除SKU"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(M,{"current-page":i(p),"onUpdate:currentPage":l[0]||(l[0]=a=>$(p)?p.value=a:p=a),"page-size":i(f),"onUpdate:pageSize":l[1]||(l[1]=a=>$(f)?f.value=a:f=a),"page-sizes":[10,20,30,40],total:i(N),background:!0,layout:"prev, pager, next, jumper,->, sizes, total",onSizeChange:l[2]||(l[2]=a=>y(1)),onCurrentChange:y},null,8,["current-page","page-size","total"])]),_:1}),e(H,{modelValue:i(w),"onUpdate:modelValue":l[3]||(l[3]=a=>$(w)?w.value=a:w=a)},{header:t(()=>[ae]),default:t(()=>[e(m,{style:{margin:"10px 0"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[u("名称")]),_:1}),e(s,{span:18},{default:t(()=>[u(h(i(d).skuName),1)]),_:1})]),_:1}),e(m,{style:{margin:"10px 0"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[u("描述")]),_:1}),e(s,{span:18},{default:t(()=>[u(h(i(d).skuDesc),1)]),_:1})]),_:1}),e(m,{style:{margin:"10px 0"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[u("价格")]),_:1}),e(s,{span:18},{default:t(()=>[u(h(i(d).price),1)]),_:1})]),_:1}),e(m,{style:{margin:"10px 0"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[u("平台属性")]),_:1}),e(s,{span:18},{default:t(()=>[(_(!0),S(C,null,z(i(d).skuAttrValueList,a=>(_(),I(D,{key:a.id,style:{margin:"5px"}},{default:t(()=>[u(h(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(m,{style:{margin:"10px 0"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[u("销售属性")]),_:1}),e(s,{span:18},{default:t(()=>[(_(!0),S(C,null,z(i(d).skuSaleAttrValueList,a=>(_(),I(D,{key:a.id,style:{margin:"5px"}},{default:t(()=>[u(h(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(m,{style:{margin:"10px 0"}},{default:t(()=>[e(s,{span:6},{default:t(()=>[u("商品图片")]),_:1}),e(s,{span:18},{default:t(()=>[e(T,{interval:4e3,type:"card",height:"200px","indicator-position":"none"},{default:t(()=>[(_(!0),S(C,null,z(i(d).skuImageList,a=>(_(),I(R,{key:a.id},{default:t(()=>[V("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,le)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),re=J(ne,[["__scopeId","data-v-6c5b8670"]]);export{re as default};
